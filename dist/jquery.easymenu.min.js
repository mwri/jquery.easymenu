// Package: jquery.easymenu v1.0.1 (built 2017-08-25 10:09:06)
// Copyright: (C) 2017 Michael Wright <mjw@methodanalysis.com>
// License: MIT

"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function t(e,t){var n=t[0];if(n in o)return t[0]=jQuery.data(e,"easymenu"),o[n].apply(e,t);throw'easymenu has no method "'+n+'"'}function n(e,t){void 0===t&&(t=jQuery.data(e,"easymenu")),e.hide(),e.shown=!1;var s=t.sub_menus;if(void 0!==s)for(var o=0;o<s.length;o++){var a=jQuery.data(s[o],"easymenu");n(s[o],a)}}function s(t,n){var s=e(window).width()-(t.x-window.pageXOffset+n.width()),o=e(window).height()-(t.y-window.pageYOffset+n.height());return s<0&&(t.x+=s-3),o<0&&(t.y+=o-3),t}e.fn.easymenu=function(e){if("string"==typeof e)return t(this,arguments);if("object"===(void 0===e?"undefined":_typeof(e)))return t(this,["constructor",e]);throw"easymenu requires a string (method) or object (constructor) first parameter"};var o={constructor:function(t,o){"root"in(o=jQuery.extend({menu_items:[]},o))||(o.root=this),this.addClass("easym_menu"),this.hide();var a=e("<tbody></tbody>");this.append(a);for(var i=o.menu_items,r=!1,u=0;u<i.length;u++)"icon"in i[u]&&(r=!0);for(var c=[],l=0;l<i.length;l++){var p=i[l];if("sub_menu"in p&&p.sub_menu.menu_items.length>0){var d=e("<table/>");e("body").append(d);var h=p.sub_menu;h.root=o.root,d.easymenu(h),c.push(d),p.sub_menu.menu_element=d}}for(var m=0;m<i.length;m++)!function(t){var u=jQuery.extend({classes:[],type:"option"},i[t]);if(u.classes.push("easym_item"),"option"===u.type){u.classes.push("easym_option"),void 0===u.callback&&void 0===u.sub_menu||u.classes.push("easym_action");var l=e('<tr class="'+u.classes.join(" ")+'"/>');if(a.append(l),r){var p='<td class="easym_icon';p+='">',u.icon&&"file"in u.icon&&(p+='<img src="'+u.icon.file+'"/>');var d=e(p+="</td>");u.icon&&"class"in u.icon&&d.append(e('<span class="'+u.icon.class+'"/>')),l.append(d)}var h=r?"<td":'<td colspan="2"';u.title&&(h+=' title="'+u.title+'"'),h+=' class="easym_label">'+u.label,void 0!==u.sub_menu&&0!==u.sub_menu.length&&(h+='<span class="easym_submenu_icon pull-right"/>');var m=e(h+="</td>");if(l.append(m),void 0!==u.callback&&l.click(function(t){e("#easym_background_click_capture").remove(),n(o.root),u.callback(t,this)}),"sub_menu"in u&&u.sub_menu.menu_items.length>0){var f=u.sub_menu.menu_element;l.click(function(t){for(var o=s({x:e(this).offset().left+e(this).width()+1,y:e(l).offset().top},f),a=0;a<c.length;a++)n(c[a]);f.css({zIndex:1e4,left:o.x,top:o.y}),f.show()})}}else if("header"===u.type){u.classes.push("easym_header");var y=e('<tr class="'+u.classes.join(" ")+'"/>');a.append(y);var v=e('<td colspan="2">'+u.label+"</td>");y.append(v)}else if("block"===u.type){u.classes.push("easym_block");var b=e('<tr class="'+u.classes.join(" ")+'"/>');a.append(b);var _=e('<td colspan="2">'+u.label+"</td>");b.append(_)}else if("separator"===u.type){u.classes.push("easym_separator");var g=e('<tr class="'+u.classes.join(" ")+'"/>');a.append(g);var w=e('<td colspan="2"><hr/></td>');g.append(w)}}(m);return t={menu_items:i,sub_menus:c,c:new Date},jQuery.data(this,"easymenu",t),this},attach:function(e,n,o,a){void 0===o&&(o="contextmenu");var i=this;return n.on(o,function(e){e.preventDefault(),e.stopPropagation();var o=s({x:e.pageX+1,y:e.pageY+1},i);return t(i,["show",o.x,o.y]),void 0!==a&&a(i,n),!1}),!1},show:function(n,s,o){if(this.css({zIndex:1e4,left:s,top:o}).on("contextmenu",function(){return!1}),this.shown)return!1;this.show();var a=this,i=e('<div id="easym_background_click_capture"/>').css({position:"fixed",top:0,left:0,width:e("body").width(),height:e("body").height()}).on("contextmenu click",function(){return t(a,["hide"]),!1});return e("body").append(i),this.shown=!0,!1},hide:function(t){return e("#easym_background_click_capture").remove(),n(this,t),!1}}}(jQuery);